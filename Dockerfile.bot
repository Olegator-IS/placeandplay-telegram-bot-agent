FROM python:3.11-slim

WORKDIR /app

# Устанавливаем зависимости
COPY requirements_api.txt .
RUN pip install --no-cache-dir -r requirements_api.txt

# Копируем файлы бота
COPY telegram_bot.py .
COPY config.env .

# Создаем пользователя для безопасности
RUN useradd --create-home --shell /bin/bash bot && \
    chown -R bot:bot /app
USER bot

# Запускаем бота
CMD ["python", "telegram_bot.py"]
